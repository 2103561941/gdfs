# 文件目录树
### 备份方式：
1. 开启一个线程，将目录树结构定期写到磁盘里。 
2. 在 client 进行 put、mkdir 等操作后，将改操作记录到日志文件里，目录树在备份过程中丢失的结构可以通过日志文件来恢复。

定期读取目录树采用深搜或者广搜算法。存储格式暂定。
开启读目录树的时候，是将树的结构从内存中拷贝出来了一份，这样可以保证读到的树是某一时间段确定的树，而且不影响目录树正常使用。
在开启读目录树前，先创建一个新的日志文件，记录两次备份目录树之间的日志操作。
目录树创建好后删除旧的目录树文件和日志文件。

发送的情况分析：
1. namenode在备份的中间时间段挂了，使用当前最新的日志文件和上一个目录树文件进行重新生成树。
2. namenode在备份的时候挂了，此时使用旧的日志文件和新的日志文件，以及上一次生成的目录树结构。


备份的目录树结构选取。


日志文件结构选取。



目录树备份


namenode重开，目录树读取